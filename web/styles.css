:root {
  --void: #050506;
  --void-charcoal: #0a0a0d;
  --void-violet: #120814;
  --void-soft: #0d0c10;
  --blood-900: #8b0000;
  --blood-700: #b11226;
  --blood-500: #ff1a1a;
  --blood-300: #ff8b8b;
  --violet-haze: #2a0d2e;
  --scan-cyan: #6bd9ff;
  --steel: #6e6e73;
  --glass: rgba(15, 10, 12, 0.72);
  --glass-alt: rgba(26, 14, 18, 0.62);
  --line: rgba(255, 50, 50, 0.22);
  --text: #f2dede;
  --muted: #c18f8f;
  --ok: #62c07a;
  --warn: #ffad33;
  --danger: #ff4a4a;
  --shadow-red: 0 0 18px rgba(177, 18, 38, 0.35), 0 0 50px rgba(139, 0, 0, 0.22);
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  min-height: 100%;
  color: var(--text);
  background: radial-gradient(circle at 30% 20%, #24070c 0%, #07070a 45%, #020204 100%);
  font-family: "Share Tech Mono", monospace;
}

body {
  position: relative;
  overflow-x: hidden;
}

.bg-layer {
  position: fixed;
  inset: 0;
  pointer-events: none;
}

.layer-nebula {
  background:
    radial-gradient(circle at 12% 32%, rgba(177, 18, 38, 0.23) 0%, transparent 40%),
    radial-gradient(circle at 80% 10%, rgba(139, 0, 0, 0.17) 0%, transparent 38%),
    radial-gradient(circle at 72% 68%, rgba(42, 13, 46, 0.26) 0%, transparent 42%),
    radial-gradient(circle at 28% 80%, rgba(177, 18, 38, 0.16) 0%, transparent 36%);
  filter: blur(20px);
  animation: nebulaDrift 30s linear infinite alternate;
}

.layer-grid {
  background-image:
    linear-gradient(to right, rgba(255, 26, 26, 0.06) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(255, 26, 26, 0.045) 1px, transparent 1px);
  background-size: 56px 56px;
  mask-image: radial-gradient(circle, rgba(0, 0, 0, 0.8), transparent 76%);
}

.layer-noise {
  background-image: radial-gradient(circle at 20% 30%, rgba(255, 255, 255, 0.02) 1px, transparent 2px);
  background-size: 3px 3px;
  opacity: 0.16;
}

.scanline-overlay {
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: repeating-linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.01) 0px,
    rgba(255, 255, 255, 0.01) 1px,
    rgba(0, 0, 0, 0.025) 3px,
    rgba(0, 0, 0, 0.025) 4px
  );
  mix-blend-mode: soft-light;
}

.app-shell {
  position: relative;
  z-index: 1;
  width: min(1800px, calc(100% - 32px));
  margin: 18px auto 40px;
}

.panel {
  position: relative;
  isolation: isolate;
  background: linear-gradient(140deg, var(--glass) 0%, rgba(10, 8, 12, 0.74) 62%, rgba(18, 9, 20, 0.72) 100%);
  border: 1px solid rgba(255, 37, 37, 0.33);
  border-radius: 14px;
  box-shadow:
    inset 0 0 0 1px rgba(255, 84, 84, 0.05),
    0 0 22px rgba(177, 18, 38, 0.22),
    0 0 55px rgba(139, 0, 0, 0.12);
  backdrop-filter: blur(12px);
  animation: frameFlicker 4.4s ease-in-out infinite;
}

.panel::before,
.panel::after {
  content: "";
  position: absolute;
  pointer-events: none;
  border-radius: 14px;
  inset: 0;
}

.panel::before {
  background:
    radial-gradient(circle at 0% 0%, rgba(255, 70, 70, 0.24), transparent 26%),
    radial-gradient(circle at 100% 100%, rgba(255, 35, 35, 0.12), transparent 26%);
  mix-blend-mode: screen;
  animation: cornerPulse 3.9s ease-in-out infinite alternate;
}

.panel::after {
  inset: 1px;
  border: 1px solid rgba(255, 74, 74, 0.06);
}

.inset {
  background: linear-gradient(130deg, rgba(14, 10, 12, 0.82), rgba(18, 8, 10, 0.72));
}

.topbar {
  display: flex;
  justify-content: space-between;
  gap: 20px;
  padding: 16px 20px;
}

.tag {
  margin: 0 0 4px;
  color: var(--muted);
  letter-spacing: 0.14em;
  font-size: 0.76rem;
}

h1,
h2,
h3,
h4 {
  margin: 0;
  font-family: "Orbitron", sans-serif;
  letter-spacing: 0.05em;
  text-transform: uppercase;
}

h1 {
  font-size: clamp(1.6rem, 3vw, 2.6rem);
  color: #ffd9d9;
  text-shadow: 0 0 18px rgba(255, 26, 26, 0.45);
}

.topbar-right {
  display: grid;
  gap: 4px;
}

.statline {
  margin: 0;
  display: flex;
  gap: 10px;
  justify-content: flex-end;
  font-size: 0.88rem;
}

.statline span {
  color: var(--muted);
}

.statline strong {
  color: #ffd5d5;
}

.nav {
  margin-top: 12px;
  padding: 10px;
  display: flex;
  gap: 10px;
}

.nav-btn,
.danger-btn,
.ghost-btn,
select,
input[type="range"] {
  font-family: "Orbitron", sans-serif;
  letter-spacing: 0.04em;
}

.nav-btn {
  background: rgba(36, 8, 12, 0.52);
  border: 1px solid rgba(255, 48, 48, 0.32);
  color: #ffd0d0;
  border-radius: 9px;
  padding: 10px 14px;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.nav-btn:hover,
.nav-btn.active {
  transform: translateY(-1px);
  box-shadow: 0 0 20px rgba(255, 26, 26, 0.26);
  border-color: rgba(255, 58, 58, 0.58);
}

main {
  margin-top: 12px;
}

.view {
  display: none;
}

.view.active {
  display: block;
}

.layout {
  display: grid;
  gap: 14px;
}

.command-layout {
  grid-template-columns: 1.7fr 1fr;
}

.systems-layout {
  grid-template-columns: minmax(290px, 0.8fr) 2fr;
}

.panel-head {
  margin-bottom: 10px;
}

.panel-head p {
  margin: 6px 0 0;
  color: var(--muted);
  font-size: 0.9rem;
}

.command-map-wrap,
.warp-panel,
.filters,
.system-detail {
  padding: 14px;
}

#galaxyCanvas,
#orbitCanvas {
  width: 100%;
  height: auto;
  border-radius: 12px;
  border: 1px solid rgba(255, 40, 40, 0.26);
  background: radial-gradient(circle at 50% 40%, rgba(34, 10, 12, 0.45), rgba(3, 3, 4, 0.95));
}

.command-map-wrap::before {
  content: "";
  position: absolute;
  inset: 52px 14px 14px;
  border-radius: 12px;
  pointer-events: none;
  background-image:
    linear-gradient(to right, rgba(115, 110, 120, 0.09) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(115, 110, 120, 0.08) 1px, transparent 1px);
  background-size: 36px 36px;
  mix-blend-mode: soft-light;
  opacity: 0.33;
}

.map-actions {
  margin-top: 10px;
  display: flex;
  gap: 10px;
}

.danger-btn,
.ghost-btn {
  border-radius: 8px;
  cursor: pointer;
  padding: 10px 13px;
  transition: all 0.2s ease;
}

.danger-btn {
  color: #ffecec;
  border: 1px solid rgba(255, 66, 66, 0.56);
  background: linear-gradient(140deg, rgba(139, 0, 0, 0.66), rgba(177, 18, 38, 0.44) 70%, rgba(30, 15, 30, 0.42));
  box-shadow: 0 0 15px rgba(255, 26, 26, 0.24);
}

.danger-btn:hover {
  box-shadow: 0 0 22px rgba(255, 26, 26, 0.4);
}

.ghost-btn {
  color: #ffb8b8;
  border: 1px solid rgba(255, 76, 76, 0.3);
  background: rgba(15, 8, 10, 0.4);
}

.ghost-btn:hover {
  border-color: rgba(255, 76, 76, 0.58);
}

.warp-result {
  position: relative;
  overflow: hidden;
  min-height: 280px;
  border: 1px solid rgba(255, 64, 64, 0.22);
  border-radius: 10px;
  background: linear-gradient(150deg, rgba(16, 10, 14, 0.8), rgba(8, 8, 11, 0.8) 70%, rgba(16, 8, 20, 0.82));
  padding: 12px;
}

.warp-result h3 {
  margin-bottom: 8px;
}

.warp-result::after {
  content: "";
  position: absolute;
  inset: -20% -10%;
  background: linear-gradient(120deg, transparent 30%, rgba(255, 120, 120, 0.04) 48%, transparent 66%);
  transform: translateX(-70%);
  animation: warpSweep 6s linear infinite;
  pointer-events: none;
}

.warp-class {
  margin: 6px 0 10px;
  font-family: "Orbitron", sans-serif;
  font-size: 1.9rem;
  letter-spacing: 0.08em;
  color: #ffe3e3;
  text-shadow: 0 0 22px rgba(255, 58, 58, 0.38);
}

.warp-divider {
  height: 1px;
  margin: 8px 0 10px;
  background: linear-gradient(to right, rgba(255, 52, 52, 0.52), rgba(255, 52, 52, 0.08));
}

.warp-emph {
  color: #fff0f0;
  text-shadow: 0 0 14px rgba(255, 71, 71, 0.45);
}

.warp-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px 12px;
}

.warp-grid p {
  margin: 0;
  font-size: 0.9rem;
  padding-bottom: 6px;
  border-bottom: 1px solid rgba(255, 72, 72, 0.14);
}

.muted {
  color: var(--muted);
}

.sector-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 12px;
}

.sector-card {
  border-radius: 12px;
  border: 1px solid rgba(255, 44, 44, 0.28);
  background: linear-gradient(160deg, var(--glass-alt) 0%, rgba(10, 8, 12, 0.8) 100%);
  padding: 12px;
  box-shadow: inset 0 0 20px rgba(255, 26, 26, 0.05);
}

.sector-card h3 {
  margin-bottom: 8px;
}

.sector-stats {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 6px 10px;
  margin-bottom: 10px;
}

.sector-stats p {
  margin: 0;
  font-size: 0.88rem;
}

.threat-badge {
  display: inline-flex;
  align-items: center;
  border: 1px solid rgba(255, 67, 67, 0.42);
  padding: 4px 8px;
  border-radius: 999px;
  font-size: 0.8rem;
  background: rgba(77, 9, 14, 0.35);
}

.mini-map {
  margin-top: 10px;
  width: 100%;
  aspect-ratio: 1.8;
  border: 1px solid rgba(255, 42, 42, 0.24);
  border-radius: 9px;
  background:
    radial-gradient(circle at 45% 55%, rgba(177, 18, 38, 0.33), transparent 40%),
    linear-gradient(160deg, rgba(20, 10, 14, 0.92), rgba(8, 6, 8, 0.96));
  position: relative;
  overflow: hidden;
}

.mini-map::before,
.mini-map::after {
  content: "";
  position: absolute;
  inset: 18% 14%;
  border: 1px solid rgba(255, 66, 66, 0.38);
  border-radius: 50%;
  animation: miniSpin 8s linear infinite;
}

.mini-map::after {
  inset: 32% 24%;
  animation-duration: 5s;
  animation-direction: reverse;
}

.filters {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.field {
  display: grid;
  gap: 6px;
}

.field span {
  font-size: 0.86rem;
  color: #e0a8a8;
}

.field.inline {
  grid-template-columns: auto 1fr;
  align-items: center;
  gap: 8px;
}

select {
  background: rgba(18, 8, 10, 0.8);
  color: var(--text);
  border: 1px solid rgba(255, 72, 72, 0.35);
  padding: 8px;
  border-radius: 8px;
}

input[type="range"] {
  accent-color: var(--blood-500);
}

.system-list-wrap h3 {
  margin-top: 6px;
}

.system-list {
  display: grid;
  gap: 8px;
  max-height: 530px;
  overflow: auto;
  padding-right: 6px;
}

.system-item {
  border: 1px solid rgba(255, 62, 62, 0.25);
  border-radius: 10px;
  background: rgba(17, 8, 10, 0.8);
  padding: 10px;
  cursor: pointer;
  transition: border-color 0.18s ease, transform 0.18s ease;
}

.system-item:hover,
.system-item.active {
  border-color: rgba(255, 80, 80, 0.62);
  transform: translateY(-1px);
}

.system-item p {
  margin: 4px 0;
  font-size: 0.85rem;
}

.system-detail {
  padding-bottom: 20px;
}

.system-meta {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 10px;
}

.star-stats {
  border: 1px solid rgba(255, 56, 56, 0.24);
  border-radius: 10px;
  padding: 10px;
  background: rgba(14, 8, 10, 0.7);
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 8px;
}

.star-stats p {
  margin: 0;
  font-size: 0.85rem;
}

.scan-controls {
  border: 1px solid rgba(255, 58, 58, 0.22);
  border-radius: 10px;
  padding: 10px;
  display: grid;
  align-content: start;
  gap: 8px;
}

.orbit-wrap {
  margin-top: 10px;
  position: relative;
}

.orbit-wrap.planet-focused #orbitCanvas {
  border-color: rgba(255, 94, 94, 0.52);
  box-shadow: 0 0 22px rgba(255, 30, 30, 0.32);
}

.scan-overlay {
  position: absolute;
  top: 10px;
  right: 10px;
  width: min(340px, calc(100% - 20px));
  border: 1px solid rgba(255, 90, 90, 0.45);
  border-radius: 10px;
  padding: 10px;
  background: rgba(18, 6, 8, 0.87);
  backdrop-filter: blur(6px);
  box-shadow: 0 0 22px rgba(255, 26, 26, 0.34);
}

body.scan-active .scan-overlay {
  border-color: rgba(107, 217, 255, 0.54);
  box-shadow: 0 0 22px rgba(107, 217, 255, 0.28);
}

.scan-overlay.hidden {
  display: none;
}

.planet-focus {
  position: absolute;
  left: 10px;
  bottom: 10px;
  width: min(470px, calc(100% - 20px));
  border: 1px solid rgba(255, 96, 96, 0.46);
  border-radius: 10px;
  padding: 10px;
  background: linear-gradient(145deg, rgba(21, 8, 11, 0.91), rgba(9, 7, 10, 0.9));
  backdrop-filter: blur(7px);
  box-shadow: 0 0 26px rgba(255, 30, 30, 0.28);
  z-index: 2;
}

.planet-focus.hidden {
  display: none;
}

.planet-focus-close {
  font-family: "Orbitron", sans-serif;
  font-size: 0.72rem;
  letter-spacing: 0.05em;
  border-radius: 999px;
  border: 1px solid rgba(255, 82, 82, 0.5);
  background: rgba(26, 8, 10, 0.72);
  color: #ffd4d4;
  padding: 4px 10px;
  margin-bottom: 8px;
  cursor: pointer;
}

.planet-focus-close:hover {
  border-color: rgba(255, 120, 120, 0.78);
}

.planet-focus-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.planet-focus-head h4 {
  margin: 0;
}

.planet-focus-type {
  margin: 4px 0 8px;
  color: #efb1b1;
  font-size: 0.82rem;
}

.planet-focus-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 6px 8px;
  margin: 6px 0;
}

.planet-focus-grid p,
.planet-focus-status p {
  margin: 0;
  font-size: 0.8rem;
}

.planet-focus-status {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 6px 8px;
  margin-top: 8px;
}

.orbit-hint {
  margin: 7px 0 0;
  font-size: 0.82rem;
}

.scan-overlay h4 {
  margin: 0 0 8px;
}

.scan-row {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 8px;
  margin: 7px 0;
}

.scan-bar {
  border: 1px solid rgba(255, 58, 58, 0.25);
  border-radius: 999px;
  overflow: hidden;
  height: 8px;
  background: rgba(42, 14, 16, 0.8);
}

.scan-fill {
  height: 100%;
  background: linear-gradient(to right, rgba(177, 18, 38, 0.7), rgba(255, 26, 26, 0.88));
  box-shadow: 0 0 12px rgba(255, 26, 26, 0.3);
}

body.scan-active .scan-fill {
  background: linear-gradient(to right, rgba(40, 160, 210, 0.62), rgba(107, 217, 255, 0.92));
  box-shadow: 0 0 12px rgba(107, 217, 255, 0.35);
}

.timeline,
.comparison {
  margin-top: 12px;
  padding: 10px;
}

.timeline-event {
  margin-top: 8px;
  min-height: 38px;
}

.comparison-panel {
  display: grid;
  gap: 10px;
}

.compare-card {
  border: 1px solid rgba(255, 56, 56, 0.25);
  border-radius: 10px;
  background: rgba(15, 7, 9, 0.82);
  padding: 9px;
}

.metric-row {
  display: grid;
  grid-template-columns: 120px 1fr auto;
  gap: 8px;
  align-items: center;
  margin: 5px 0;
}

.metric-bar {
  height: 6px;
  border-radius: 999px;
  border: 1px solid rgba(255, 61, 61, 0.24);
  overflow: hidden;
}

.metric-bar > i {
  display: block;
  height: 100%;
  background: linear-gradient(to right, rgba(177, 18, 38, 0.72), rgba(255, 26, 26, 0.9));
}

.planet-registry {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 10px;
}

.planet-card {
  border: 1px solid rgba(255, 54, 54, 0.26);
  border-radius: 12px;
  padding: 10px;
  background: linear-gradient(150deg, rgba(17, 9, 12, 0.84), rgba(8, 7, 10, 0.86));
}

.planet-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}

.planet-type {
  color: #e9a9a9;
  font-size: 0.82rem;
}

.planet-actions {
  margin: 8px 0 10px;
  display: flex;
  gap: 8px;
}

.planet-actions label {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 0.8rem;
}

.planet-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 6px 10px;
}

.planet-grid p,
.status-grid p {
  margin: 0;
  font-size: 0.82rem;
}

.section-label {
  margin: 10px 0 6px;
  color: #ffb2b2;
  letter-spacing: 0.08em;
  font-size: 0.76rem;
}

.planet-card p {
  margin: 5px 0;
  font-size: 0.84rem;
}

.status-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 5px 9px;
}

.pill {
  border: 1px solid rgba(255, 64, 64, 0.4);
  border-radius: 999px;
  display: inline-flex;
  padding: 2px 8px;
  font-size: 0.74rem;
}

.encyclopedia-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 10px;
}

.topic-card {
  border: 1px solid rgba(255, 66, 66, 0.26);
  border-radius: 10px;
  padding: 12px;
  background: linear-gradient(140deg, rgba(18, 9, 13, 0.8), rgba(8, 8, 11, 0.84));
}

.topic-card h3 {
  font-size: 1rem;
}

.topic-card p {
  margin: 8px 0 0;
  color: #d5a2a2;
}

#warpBtn {
  animation: warpPulse 3.8s ease-in-out infinite;
}

.inline-link {
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.card-actions {
  margin-top: 10px;
  display: flex;
  gap: 8px;
}

.detail-shell {
  display: grid;
  gap: 14px;
}

.detail-page .detail-header,
.detail-page .detail-section {
  padding: 14px;
}

.detail-actions {
  margin-top: 12px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.detail-stats {
  margin-top: 10px;
  border: 1px solid rgba(255, 58, 58, 0.24);
  border-radius: 10px;
  padding: 10px;
  background: rgba(14, 8, 10, 0.7);
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 8px;
}

.detail-stats.compact {
  margin-top: 8px;
}

.detail-stats p {
  margin: 0;
  font-size: 0.85rem;
}

.detail-card-grid {
  display: grid;
  gap: 10px;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
}

.detail-card {
  border: 1px solid rgba(255, 64, 64, 0.26);
  border-radius: 10px;
  background: linear-gradient(140deg, rgba(18, 9, 13, 0.82), rgba(8, 8, 11, 0.86));
  padding: 12px;
}

.detail-card h3 {
  margin-bottom: 6px;
}

.detail-card p {
  margin: 6px 0;
}

.orbit-page-canvas {
  width: 100%;
  height: auto;
  border-radius: 12px;
  border: 1px solid rgba(255, 40, 40, 0.26);
  background: radial-gradient(circle at 50% 40%, rgba(34, 10, 12, 0.45), rgba(3, 3, 4, 0.95));
}

.planet-detail-grid,
.planet-narrative {
  display: grid;
  gap: 10px;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
}

@keyframes nebulaDrift {
  from {
    transform: translate3d(0, 0, 0) scale(1);
  }
  to {
    transform: translate3d(12px, -8px, 0) scale(1.08);
  }
}

@keyframes miniSpin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@keyframes frameFlicker {
  0%,
  100% {
    box-shadow:
      inset 0 0 0 1px rgba(255, 84, 84, 0.05),
      0 0 22px rgba(177, 18, 38, 0.22),
      0 0 55px rgba(139, 0, 0, 0.12);
  }
  53% {
    box-shadow:
      inset 0 0 0 1px rgba(255, 84, 84, 0.07),
      0 0 26px rgba(177, 18, 38, 0.29),
      0 0 63px rgba(139, 0, 0, 0.16);
  }
}

@keyframes cornerPulse {
  from {
    opacity: 0.5;
  }
  to {
    opacity: 0.9;
  }
}

@keyframes warpSweep {
  0% {
    transform: translateX(-70%);
  }
  100% {
    transform: translateX(70%);
  }
}

@keyframes warpPulse {
  0%,
  100% {
    box-shadow: 0 0 15px rgba(255, 26, 26, 0.24);
  }
  50% {
    box-shadow: 0 0 26px rgba(255, 26, 26, 0.46);
  }
}

@media (max-width: 1280px) {
  .command-layout,
  .systems-layout {
    grid-template-columns: 1fr;
  }

  .system-meta {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 740px) {
  .app-shell {
    width: calc(100% - 18px);
    margin-inline: auto;
  }

  .topbar {
    display: grid;
  }

  .topbar-right {
    justify-items: start;
  }

  .nav {
    overflow: auto;
  }

  .planet-registry {
    grid-template-columns: 1fr;
  }

  .planet-focus-grid {
    grid-template-columns: 1fr 1fr;
  }

  .detail-actions {
    flex-direction: column;
    align-items: stretch;
  }
}
